{% extends 'base.html' %}
{% load  custom_tags %}
{% load i18n %}
{% load static %}
{% block title %}
    {% trans 'Course' %}
{% endblock title %}
{% block content %}
    <div class="max-w-4xl mx-auto px-4">
        <h1 class="text-4xl text-center mt-10 text-rose md:text-5xl font-bold mb-6">{{ course.name }}</h1>
        <!-- Institution & Formation Info -->
        <div class="bg-tuna rounded-xl border-2 border-emperor p-6 mb-8">
            <div class="space-y-3 text-silver">
                {% if course.formation.count > 0 %}
                    <div>
                        <p class="text-sm opacity-75 mb-2">{% trans "Parte das formações" %}</p>
                        <div class="flex flex-wrap gap-2">
                            {% for formation in course.formation.all %}
                                <a href="{% link_to_formation_section 'formations' formation.pk %}"
                                   class="inline-block px-4 py-2 bg-rose text-white rounded-lg hover:bg-rose/80 transition-all duration-300 text-sm font-semibold hover:shadow-lg hover:shadow-rose/50">
                                    {{ formation.name }}
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
                <div class="flex items-center gap-2 border-emperor">
                    <span class="text-sm opacity-75">{% trans 'Instituição' %}:</span>
                    <span class="font-semibold text-amber">{{ course.institution.name }}</span>
                </div>
            </div>
        </div>
        <!-- Main Content -->
        <div class="bg-tuna rounded-xl border-2 border-emperor p-8 mb-8">
            <div class="space-y-8">
                <!-- Description -->
                <div>
                    <h2 class="text-2xl text-rose font-bold mb-4 flex items-center">
                        <span class="inline-block w-1 h-6 bg-rose rounded mr-3"></span>
                        {% trans 'Descrição' %}
                    </h2>
                    <div class="text-silver text-justify leading-relaxed">{{ course.description|linebreaks }}</div>
                </div>
                <!-- Curriculum Map -->
                <div class="border-t border-emperor pt-8">
                    <h2 class="text-2xl text-rose font-bold mb-4 flex items-center">
                        <span class="inline-block w-1 h-6 bg-rose rounded mr-3"></span>
                        {% trans 'Mapa de Currículo' %}
                    </h2>
                    <div class="text-silver whitespace-pre-wrap leading-relaxed">{{ course.curriculum_map|linebreaks }}</div>
                </div>
                <!-- Course Details Grid -->
                <div class="border-t border-emperor pt-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Left Column -->
                        <div class="space-y-4">
                            <div>
                                <p class="text-silver text-sm opacity-75 mb-1">{% trans 'Data de início' %}</p>
                                <p class="text-amber text-sm font-semibold">{{ course.start_date }}</p>
                            </div>
                            <div>
                                <p class="text-silver text-sm opacity-75 mb-1">{% trans 'Data de fim' %}</p>
                                <p class="text-amber text-sm font-semibold">{{ course.end_date }}</p>
                            </div>
                        </div>
                        <!-- Right Column -->
                        <div class="space-y-4">
                            <div>
                                <p class="text-silver text-sm opacity-75 mb-1">{% trans 'Carga horária' %}</p>
                                <p class="text-springgreen text-sm font-semibold">{{ course.workload }} {% trans 'horas' %}</p>
                            </div>
                            <div>
                                <p class="text-silver text-sm opacity-75 mb-2">{% trans 'Categorias' %}</p>
                                <div class="flex flex-wrap gap-2">
                                    {% for category in course.categories.all %}
                                        <span class="inline-block py-1 bg-amber/20 text-amber text-xs font-semibold rounded-full">{{ category.name }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Back Button -->
        <div class="text-center mb-10">
            <a href="{% url 'courses' %}"
               class="inline-block px-6 py-2 bg-rose text-white font-semibold rounded-lg hover:bg-rose/80 transition-colors">
                {% trans 'Voltar para Cursos' %}
            </a>
        </div>
    </div>
{% endblock content %}
